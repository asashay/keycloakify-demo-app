<p align="center">
    <img src="https://user-images.githubusercontent.com/6702424/80216211-00ef5280-863e-11ea-81de-59f3a3d4b8e4.png">  
</p>
<p align="center">
    <i></i>
    <br>
    <br>
    <img src="https://github.com/garronej/keycloakify-demo-app/workflows/ci/badge.svg?branch=main">
</p>
<p align="center">
  <a href="https://github.com/garronej/keycloakify-demo-app">Home</a>
  -
  <a href="https://github.com/garronej/keycloakify-demo-app">Documentation</a>
</p>


This repo is a demo project that shows how to setup Github Action to automatically
build and make available the keycloakes thems (`.jar` file) generated by [`keycloakify`](https://github.com/InseeFrLab/keycloakify)

Beside the CI setup takes charges of:

- Publishing the immage on Dockerhub
- Testing that it builds and that tests passes on linux and windows.
- Maintaining a CHANGELOG.
- Publishing on NPM and creating corresponding GitHub releases.
- Maintaining a ``latest`` branch always in sync with the latest release.

## Setting up

will need to provide two tokens so that the workflow can publish on your behalf:

Go to repository ``Settings`` tab, then ``Secrets`` you will need to add two new secrets:
- ``PAT``, GitHub **P**ersonal **A**ccess **T**oken with the **repo** authorization. [link](https://github.com/settings/tokens)
- ``DOCKERHUB_TOKEN``, you Dockerhub authorization token.
- ``DOCKERHUB_USERNAME``, Your Dockerhub username

To trigger publishing edit the ``package.json`` ``version`` field ( ``0.0.0``-> ``0.0.1`` for example) then push changes... that's all !
The publishing will actually be performed only if ``npm test`` passes.  

# Results

- The last version of the theme can always be downloaded at this URL:  



- You can find the theme for a specific release in the assets, example:

 ![image](https://user-images.githubusercontent.com/6702424/110415780-ceeab180-8092-11eb-98a5-68ded9bfeeb7.png)
